# K8s

#### 架构[https://zhuanlan.zhihu.com/p/411452088](https://zhuanlan.zhihu.com/p/411452088)

#### configmap secret [https://cloud.tencent.com/developer/article/1618754](https://cloud.tencent.com/developer/article/1618754)

* 存储配置和安全信息
* 配置文件、环境变量、volume挂在方式

### ingress

* 实现外面访问集群后段服务的路由转发

#### controllers

* pod deployment statefuset job namespace token ...

#### etcd （[https://boilingfrog.github.io/2021/08/02/raft%E7%AE%97%E6%B3%95%E7%90%86%E8%A7%A3/](https://boilingfrog.github.io/2021/08/02/raft%E7%AE%97%E6%B3%95%E7%90%86%E8%A7%A3/)）

* raft（[https://juejin.cn/post/7080138285753827336](https://juejin.cn/post/7080138285753827336)）
* k v 存储
*   Raft在对应的任期中每次只有一个leader产生，通过候选超时算法，保证了在大多数只有一个leader被选出的情况；

    2、所有的数据都是从leader流向follower中，通过日志的复制确认机制，保证绝大多数的follower都能同步到消息；

#### operator（[https://tonybai.com/2022/08/15/developing-kubernetes-operators-in-go-part1/](https://tonybai.com/2022/08/15/developing-kubernetes-operators-in-go-part1/)）

* 操作对象(CRD) + 控制逻辑(controller)

#### mainifest k8s对象描述 spec：对象约束 





*   1、虚拟机 是硬件隔离，因为hypervisor 虚拟一系列硬件资源

    2、容器是 进程级隔离，依靠NameSpace 机制实现进程间的隔离

    3、容器的资源限制，依靠Linux Cgroups，它就是限制一个进程组能够使用的资源上限，包括 CPU、内存、磁盘、网络带宽等等。

    4、容器只是运行在宿主机上的一种特殊的进程，那么多个容器之间使用的就还是同一个宿主机的操作系统内核。

    5、通过exec在容器中执行启动的后台进程，实际不受docker控制（回收和生命周期），只有PID=1的受控制。

    6、Namespace做隔离，Cgroups做限制，rootfs做文件系统
*
